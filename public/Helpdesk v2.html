<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° Helpdesk</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Prompt', sans-serif;
    }
    
    * {
      box-sizing: border-box;
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hover-lift {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .hover-lift:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .floating-button {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4);
    }

    @media (min-width: 768px) {
      .floating-button {
        display: none;
      }
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .status-pending {
      background-color: #FEF3C7;
      color: #92400E;
    }

    .status-in-progress {
      background-color: #DBEAFE;
      color: #1E40AF;
    }

    .status-completed {
      background-color: #D1FAE5;
      color: #065F46;
    }

    .priority-low {
      color: #059669;
    }

    .priority-medium {
      color: #D97706;
    }

    .priority-high {
      color: #DC2626;
    }

    .notification-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      background-color: #DC2626;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mobile-menu {
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }

    .mobile-menu.open {
      transform: translateX(0);
    }

    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 40;
    }

    .overlay.show {
      display: block;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-slate-100 min-h-full"><!-- Header -->
  <header class="bg-slate-800 text-white shadow-lg">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16"><!-- Logo & Title -->
     <div class="flex items-center space-x-3"><button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-slate-700">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
       </svg></button>
      <div class="flex items-center space-x-2">
       <svg class="w-8 h-8 text-teal-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
       </svg>
       <div>
        <h1 id="header-title" class="text-lg font-semibold">‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° / Helpdesk</h1>
        <p id="header-company" class="text-xs text-slate-300">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ABC ‡∏à‡∏≥‡∏Å‡∏±‡∏î</p>
       </div>
      </div>
     </div><!-- Right Menu -->
     <div class="flex items-center space-x-4"><button id="notification-btn" class="relative p-2 rounded-lg hover:bg-slate-700 transition">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
       </svg><span id="notification-count" class="notification-badge" style="display: none;">0</span> </button>
      <div class="hidden md:flex items-center space-x-2">
       <div class="w-8 h-8 bg-teal-500 rounded-full flex items-center justify-center font-semibold">
        ‡∏ú
       </div><span class="text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
      </div>
     </div>
    </div>
   </div>
  </header><!-- Mobile Menu -->
  <div class="overlay" id="menu-overlay"></div>
  <div class="mobile-menu fixed top-0 left-0 bottom-0 w-64 bg-white shadow-xl z-50" id="mobile-menu">
   <div class="p-4 bg-slate-800 text-white">
    <div class="flex items-center justify-between">
     <h2 class="font-semibold">‡πÄ‡∏°‡∏ô‡∏π</h2><button id="close-menu-btn" class="p-2 rounded-lg hover:bg-slate-700">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
   </div>
   <nav class="p-4"><button onclick="showView('dashboard')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-slate-100 transition mb-2"> üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î </button> <button onclick="showView('create')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-slate-100 transition mb-2"> ‚ûï ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà </button> <button onclick="showView('list')" class="w-full text-left px-4 py-3 rounded-lg hover:bg-slate-100 transition"> üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° </button>
   </nav>
  </div><!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"><!-- Dashboard View -->
   <div id="dashboard-view" class="fade-in"><!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
     <div class="bg-white rounded-xl shadow-md p-6 hover-lift">
      <div class="flex items-center justify-between">
       <div>
        <p class="text-slate-600 text-sm mb-1">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
        <p id="stat-pending" class="text-3xl font-bold text-yellow-600">0</p>
       </div>
       <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
       </div>
      </div>
     </div>
     <div class="bg-white rounded-xl shadow-md p-6 hover-lift">
      <div class="flex items-center justify-between">
       <div>
        <p class="text-slate-600 text-sm mb-1">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
        <p id="stat-in-progress" class="text-3xl font-bold text-blue-600">0</p>
       </div>
       <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
       </div>
      </div>
     </div>
     <div class="bg-white rounded-xl shadow-md p-6 hover-lift">
      <div class="flex items-center justify-between">
       <div>
        <p class="text-slate-600 text-sm mb-1">‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>
        <p id="stat-completed" class="text-3xl font-bold text-green-600">0</p>
       </div>
       <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
       </div>
      </div>
     </div>
    </div><!-- Action Button (Desktop) -->
    <div class="hidden md:block mb-6"><button onclick="showView('create')" class="bg-teal-500 hover:bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition flex items-center space-x-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
      </svg><span>‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà</span> </button>
    </div><!-- Announcements -->
    <div class="bg-white rounded-xl shadow-md p-6">
     <h2 class="text-xl font-semibold text-slate-800 mb-4 flex items-center">
      <svg class="w-6 h-6 mr-2 text-teal-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"></path>
      </svg> ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h2>
     <div class="space-y-3">
      <div class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded">
       <p class="font-semibold text-slate-800">üì¢ ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</p>
       <p class="text-sm text-slate-600 mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå‡∏ó‡∏µ‡πà 15 ‡∏°‡∏¥.‡∏¢. ‡πÄ‡∏ß‡∏•‡∏≤ 22.00-24.00 ‡∏ô.</p>
      </div>
      <div class="border-l-4 border-green-500 bg-green-50 p-4 rounded">
       <p class="font-semibold text-slate-800">‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà</p>
       <p class="text-sm text-slate-600 mt-1">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß</p>
      </div>
     </div>
    </div>
   </div><!-- Create Ticket View -->
   <div id="create-view" style="display: none;" class="fade-in">
    <div class="bg-white rounded-xl shadow-md p-6 max-w-3xl mx-auto">
     <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-slate-800">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° / ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h2><button onclick="showView('dashboard')" class="text-slate-600 hover:text-slate-800">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
       </svg></button>
     </div>
     <form id="ticket-form" class="space-y-4">
      <div><label class="block text-sm font-semibold text-slate-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á</label> <input type="text" id="reporter-name" required class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
      </div>
      <div><label class="block text-sm font-semibold text-slate-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label> <select id="category" required class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"> <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option> <option value="IT">IT / ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</option> <option value="‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</option> <option value="‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà / Facilities</option> <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option> </select>
      </div>
      <div><label class="block text-sm font-semibold text-slate-700 mb-2">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</label> <input type="text" id="title" required class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏î‡∏¢‡∏¢‡πà‡∏≠">
      </div>
      <div><label class="block text-sm font-semibold text-slate-700 mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label> <textarea id="description" required rows="4" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>
      </div>
      <div><label class="block text-sm font-semibold text-slate-700 mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</label> <select id="priority" required class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"> <option value="‡∏ï‡πà‡∏≥">‡∏ï‡πà‡∏≥ - ‡πÑ‡∏°‡πà‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</option> <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á" selected>‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á - ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥</option> <option value="‡∏™‡∏π‡∏á">‡∏™‡∏π‡∏á - ‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å</option> </select>
      </div>
      <div class="pt-4"><button type="submit" id="submit-btn" class="w-full bg-teal-500 hover:bg-teal-600 text-white py-3 rounded-lg font-semibold shadow-lg transition"> ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ </button>
      </div>
     </form>
     <div id="success-message" style="display: none;" class="mt-6 bg-green-50 border border-green-200 rounded-lg p-4 text-center">
      <svg class="w-12 h-12 text-green-500 mx-auto mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <p class="text-green-800 font-semibold">‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!</p>
      <p class="text-green-600 text-sm mt-1">‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
     </div>
    </div>
   </div><!-- Ticket List View -->
   <div id="list-view" style="display: none;" class="fade-in">
    <div class="bg-white rounded-xl shadow-md p-6">
     <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0">
      <h2 class="text-2xl font-bold text-slate-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</h2>
      <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"><input type="text" id="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." class="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"> <select id="filter-status" class="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"> <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option> <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option> <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option> <option value="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option> </select>
      </div>
     </div><!-- Desktop Table -->
     <div class="hidden md:block overflow-x-auto">
      <table class="w-full">
       <thead class="bg-slate-50">
        <tr>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç</th>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</th>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á</th>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
         <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
       </thead>
       <tbody id="ticket-table-body">
       </tbody>
      </table>
     </div><!-- Mobile Cards -->
     <div id="ticket-cards" class="md:hidden space-y-4">
     </div>
     <div id="no-tickets" style="display: none;" class="text-center py-12">
      <svg class="w-16 h-16 text-slate-300 mx-auto mb-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
      </svg>
      <p class="text-slate-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</p>
     </div>
    </div>
   </div><!-- Ticket Detail View -->
   <div id="detail-view" style="display: none;" class="fade-in">
    <div class="bg-white rounded-xl shadow-md p-6 max-w-4xl mx-auto">
     <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-slate-800">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Ticket</h2><button onclick="showView('list')" class="text-slate-600 hover:text-slate-800">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
       </svg></button>
     </div>
     <div id="ticket-detail-content" class="space-y-4">
     </div>
    </div>
   </div>
  </main><!-- Floating Action Button (Mobile) --> <button onclick="showView('create')" class="floating-button bg-teal-500 hover:bg-teal-600 text-white w-14 h-14 rounded-full flex items-center justify-center transition">
   <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
   </svg></button> <!-- Footer -->
  <footer class="bg-slate-800 text-white mt-12">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
     <div>
      <h3 class="font-semibold mb-2">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ù‡πà‡∏≤‡∏¢ IT Support</h3>
      <p id="footer-email" class="text-sm text-slate-300">üìß support@company.co.th</p>
     </div>
     <div>
      <h3 class="font-semibold mb-2">‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</h3>
      <p id="footer-phone" class="text-sm text-slate-300">üìû 02-xxx-xxxx</p>
     </div>
     <div>
      <h3 class="font-semibold mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£</h3>
      <p id="footer-hours" class="text-sm text-slate-300">üïê ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‚Äì‡∏®‡∏∏‡∏Å‡∏£‡πå 08.30‚Äì17.30 ‡∏ô.</p>
     </div>
    </div>
    <div class="border-t border-slate-700 mt-6 pt-6 text-center text-sm text-slate-400">
     <p>¬© 2024 ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° Helpdesk. All rights reserved.</p>
    </div>
   </div>
  </footer>
  <script>
    let allTickets = [];
    let currentView = 'dashboard';
    let selectedTicket = null;

    const defaultConfig = {
      company_name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ABC ‡∏à‡∏≥‡∏Å‡∏±‡∏î',
      system_title: '‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° / Helpdesk',
      support_email: 'support@company.co.th',
      support_phone: '02-xxx-xxxx',
      working_hours: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‚Äì‡∏®‡∏∏‡∏Å‡∏£‡πå 08.30‚Äì17.30 ‡∏ô.',
      background_color: '#F1F5F9',
      surface_color: '#FFFFFF',
      text_color: '#1E293B',
      primary_action_color: '#14B8A6',
      secondary_action_color: '#1E3A8A',
      font_family: 'Prompt',
      font_size: 16
    };

    const dataHandler = {
      onDataChanged(data) {
        allTickets = data;
        updateStats();
        if (currentView === 'list') {
          renderTicketList();
        }
        updateNotificationBadge();
      }
    };

    async function initApp() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        console.error('Failed to initialize data SDK');
      }

      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const customFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = 'sans-serif';
            const baseSize = config.font_size || defaultConfig.font_size;
            
            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
            document.body.style.fontSize = `${baseSize}px`;
            document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
            document.body.style.color = config.text_color || defaultConfig.text_color;
            
            document.getElementById('header-title').textContent = config.system_title || defaultConfig.system_title;
            document.getElementById('header-company').textContent = config.company_name || defaultConfig.company_name;
            document.getElementById('footer-email').textContent = `üìß ${config.support_email || defaultConfig.support_email}`;
            document.getElementById('footer-phone').textContent = `üìû ${config.support_phone || defaultConfig.support_phone}`;
            document.getElementById('footer-hours').textContent = `üïê ${config.working_hours || defaultConfig.working_hours}`;
            
            const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
            const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            
            document.querySelectorAll('.bg-teal-500').forEach(el => {
              el.style.backgroundColor = primaryColor;
            });
            
            document.querySelectorAll('.bg-slate-800').forEach(el => {
              el.style.backgroundColor = secondaryColor;
            });
            
            document.querySelectorAll('.bg-white').forEach(el => {
              el.style.backgroundColor = surfaceColor;
            });
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  config.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => config.surface_color || defaultConfig.surface_color,
                set: (value) => {
                  config.surface_color = value;
                  window.elementSdk.setConfig({ surface_color: value });
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  config.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                set: (value) => {
                  config.primary_action_color = value;
                  window.elementSdk.setConfig({ primary_action_color: value });
                }
              },
              {
                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                set: (value) => {
                  config.secondary_action_color = value;
                  window.elementSdk.setConfig({ secondary_action_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => config.font_family || defaultConfig.font_family,
              set: (value) => {
                config.font_family = value;
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: {
              get: () => config.font_size || defaultConfig.font_size,
              set: (value) => {
                config.font_size = value;
                window.elementSdk.setConfig({ font_size: value });
              }
            }
          }),
          mapToEditPanelValues: (config) => new Map([
            ['company_name', config.company_name || defaultConfig.company_name],
            ['system_title', config.system_title || defaultConfig.system_title],
            ['support_email', config.support_email || defaultConfig.support_email],
            ['support_phone', config.support_phone || defaultConfig.support_phone],
            ['working_hours', config.working_hours || defaultConfig.working_hours]
          ])
        });
      }
    }

    function generateTicketNumber() {
      const timestamp = Date.now();
      const random = Math.floor(Math.random() * 1000);
      return `TK${timestamp}${random}`;
    }

    function updateStats() {
      const pending = allTickets.filter(t => t.status === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£').length;
      const inProgress = allTickets.filter(t => t.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£').length;
      const completed = allTickets.filter(t => t.status === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô').length;

      document.getElementById('stat-pending').textContent = pending;
      document.getElementById('stat-in-progress').textContent = inProgress;
      document.getElementById('stat-completed').textContent = completed;
    }

    function updateNotificationBadge() {
      const pendingCount = allTickets.filter(t => t.status === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£').length;
      const badge = document.getElementById('notification-count');
      if (pendingCount > 0) {
        badge.textContent = pendingCount;
        badge.style.display = 'flex';
      } else {
        badge.style.display = 'none';
      }
    }

    function showView(view) {
      currentView = view;
      document.getElementById('dashboard-view').style.display = 'none';
      document.getElementById('create-view').style.display = 'none';
      document.getElementById('list-view').style.display = 'none';
      document.getElementById('detail-view').style.display = 'none';

      if (view === 'dashboard') {
        document.getElementById('dashboard-view').style.display = 'block';
      } else if (view === 'create') {
        document.getElementById('create-view').style.display = 'block';
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('ticket-form').reset();
      } else if (view === 'list') {
        document.getElementById('list-view').style.display = 'block';
        renderTicketList();
      } else if (view === 'detail') {
        document.getElementById('detail-view').style.display = 'block';
        renderTicketDetail();
      }

      closeMobileMenu();
    }

    function getStatusClass(status) {
      if (status === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') return 'status-pending';
      if (status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') return 'status-in-progress';
      if (status === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') return 'status-completed';
      return '';
    }

    function getPriorityClass(priority) {
      if (priority === '‡∏ï‡πà‡∏≥') return 'priority-low';
      if (priority === '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á') return 'priority-medium';
      if (priority === '‡∏™‡∏π‡∏á') return 'priority-high';
      return '';
    }

    function formatDate(isoString) {
      const date = new Date(isoString);
      return date.toLocaleDateString('th-TH', { 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function renderTicketList() {
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      const statusFilter = document.getElementById('filter-status').value;

      let filtered = allTickets.filter(ticket => {
        const matchesSearch = ticket.title.toLowerCase().includes(searchTerm) || 
                            ticket.ticket_number.toLowerCase().includes(searchTerm);
        const matchesStatus = !statusFilter || ticket.status === statusFilter;
        return matchesSearch && matchesStatus;
      });

      const tableBody = document.getElementById('ticket-table-body');
      const cardsContainer = document.getElementById('ticket-cards');
      const noTickets = document.getElementById('no-tickets');

      if (filtered.length === 0) {
        tableBody.innerHTML = '';
        cardsContainer.innerHTML = '';
        noTickets.style.display = 'block';
        return;
      }

      noTickets.style.display = 'none';

      tableBody.innerHTML = filtered.map(ticket => `
        <tr class="border-b border-slate-200 hover:bg-slate-50">
          <td class="px-4 py-3 text-sm font-mono">${ticket.ticket_number}</td>
          <td class="px-4 py-3 text-sm">${ticket.category}</td>
          <td class="px-4 py-3 text-sm">${ticket.title}</td>
          <td class="px-4 py-3 text-sm">${formatDate(ticket.created_at)}</td>
          <td class="px-4 py-3">
            <span class="status-badge ${getStatusClass(ticket.status)}">${ticket.status}</span>
          </td>
          <td class="px-4 py-3">
            <button onclick="viewTicketDetail('${ticket.__backendId}')" class="text-teal-600 hover:text-teal-800 text-sm font-semibold">
              ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
            </button>
          </td>
        </tr>
      `).join('');

      cardsContainer.innerHTML = filtered.map(ticket => `
        <div class="bg-white border border-slate-200 rounded-lg p-4 shadow-sm">
          <div class="flex justify-between items-start mb-2">
            <span class="text-xs font-mono text-slate-500">${ticket.ticket_number}</span>
            <span class="status-badge ${getStatusClass(ticket.status)}">${ticket.status}</span>
          </div>
          <h3 class="font-semibold text-slate-800 mb-1">${ticket.title}</h3>
          <p class="text-sm text-slate-600 mb-2">${ticket.category}</p>
          <p class="text-xs text-slate-500 mb-3">${formatDate(ticket.created_at)}</p>
          <button onclick="viewTicketDetail('${ticket.__backendId}')" class="w-full bg-teal-500 text-white py-2 rounded-lg text-sm font-semibold">
            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
          </button>
        </div>
      `).join('');
    }

    function viewTicketDetail(backendId) {
      selectedTicket = allTickets.find(t => t.__backendId === backendId);
      if (selectedTicket) {
        showView('detail');
      }
    }

    function renderTicketDetail() {
      if (!selectedTicket) return;

      const content = document.getElementById('ticket-detail-content');
      content.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç Ticket</p>
            <p class="font-mono font-semibold">${selectedTicket.ticket_number}</p>
          </div>
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</p>
            <span class="status-badge ${getStatusClass(selectedTicket.status)}">${selectedTicket.status}</span>
          </div>
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á</p>
            <p class="font-semibold">${selectedTicket.reporter_name}</p>
          </div>
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á</p>
            <p class="font-semibold">${formatDate(selectedTicket.created_at)}</p>
          </div>
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
            <p class="font-semibold">${selectedTicket.category}</p>
          </div>
          <div>
            <p class="text-sm text-slate-600 mb-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô</p>
            <p class="font-semibold ${getPriorityClass(selectedTicket.priority)}">${selectedTicket.priority}</p>
          </div>
        </div>

        <div class="border-t border-slate-200 pt-4 mb-6">
          <p class="text-sm text-slate-600 mb-2">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>
          <p class="font-semibold text-lg mb-4">${selectedTicket.title}</p>
          
          <p class="text-sm text-slate-600 mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
          <p class="text-slate-700 whitespace-pre-wrap">${selectedTicket.description}</p>
        </div>

        ${selectedTicket.status !== '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' ? `
          <div class="flex flex-col sm:flex-row gap-2">
            <button onclick="updateTicketStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£')" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold transition">
              ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
            </button>
            <button onclick="updateTicketStatus('‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô')" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg font-semibold transition">
              ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
            </button>
          </div>
        ` : ''}
      `;
    }

    async function updateTicketStatus(newStatus) {
      if (!selectedTicket) return;

      const submitBtn = event.target;
      submitBtn.disabled = true;
      submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï...';

      const updatedTicket = {
        ...selectedTicket,
        status: newStatus,
        updated_at: new Date().toISOString()
      };

      const result = await window.dataSdk.update(updatedTicket);

      if (result.isOk) {
        selectedTicket = updatedTicket;
        renderTicketDetail();
      } else {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'bg-red-50 border border-red-200 rounded-lg p-4 mt-4';
        errorDiv.innerHTML = '<p class="text-red-800">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>';
        document.getElementById('ticket-detail-content').appendChild(errorDiv);
        
        submitBtn.disabled = false;
        submitBtn.textContent = newStatus === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' ? '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' : '‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
      }
    }

    document.getElementById('ticket-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      if (allTickets.length >= 999) {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'bg-red-50 border border-red-200 rounded-lg p-4 mt-4';
        errorDiv.innerHTML = '<p class="text-red-800 font-semibold">‡∏ñ‡∏∂‡∏á‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß</p><p class="text-red-600 text-sm mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 999 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</p>';
        document.getElementById('create-view').querySelector('.bg-white').appendChild(errorDiv);
        return;
      }

      const submitBtn = document.getElementById('submit-btn');
      submitBtn.disabled = true;
      submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...';

      const newTicket = {
        ticket_number: generateTicketNumber(),
        reporter_name: document.getElementById('reporter-name').value,
        category: document.getElementById('category').value,
        title: document.getElementById('title').value,
        description: document.getElementById('description').value,
        priority: document.getElementById('priority').value,
        status: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£',
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString()
      };

      const result = await window.dataSdk.create(newTicket);

      if (result.isOk) {
        document.getElementById('ticket-form').style.display = 'none';
        document.getElementById('success-message').style.display = 'block';
        
        setTimeout(() => {
          showView('dashboard');
        }, 2000);
      } else {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'bg-red-50 border border-red-200 rounded-lg p-4 mt-4';
        errorDiv.innerHTML = '<p class="text-red-800">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>';
        document.getElementById('create-view').querySelector('.bg-white').appendChild(errorDiv);
        
        submitBtn.disabled = false;
        submitBtn.textContent = '‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤';
      }
    });

    document.getElementById('search-input').addEventListener('input', renderTicketList);
    document.getElementById('filter-status').addEventListener('change', renderTicketList);

    document.getElementById('mobile-menu-btn').addEventListener('click', () => {
      document.getElementById('mobile-menu').classList.add('open');
      document.getElementById('menu-overlay').classList.add('show');
    });

    function closeMobileMenu() {
      document.getElementById('mobile-menu').classList.remove('open');
      document.getElementById('menu-overlay').classList.remove('show');
    }

    document.getElementById('close-menu-btn').addEventListener('click', closeMobileMenu);
    document.getElementById('menu-overlay').addEventListener('click', closeMobileMenu);

    document.getElementById('notification-btn').addEventListener('click', () => {
      showView('list');
      document.getElementById('filter-status').value = '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
      renderTicketList();
    });

    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'996fdcda4475893f',t:'MTc2MTg3OTIxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>